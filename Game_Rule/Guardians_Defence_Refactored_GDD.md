# 《守護者防線：雷霆遺產》遊戲設計企劃書 (GDD)

## 1. 遊戲概述
本遊戲是一款基於《雷霆之石》(Thunderstone) 核心機制的卡牌集合構築遊戲 (Deck-Building Game)。玩家從基礎的牌組開始，透過招募英雄、購買裝備與法術，進入充滿危險的地城討伐怪物，保衛村莊不被破壞，最終目標是擊敗強大的 Boss 並奪取「雷霆之石」。

---

## 2. 卡牌物件設計結構 (Data Schema)

為了擴展性與未來資料庫串接，所有卡牌統一採用以下 JSON 結構基礎：

```json
{
  "id": "string",          // 唯一識別碼
  "name": "string",        // 顯示名稱
  "type": "string",        // Hero, Weapon, Spell, Item, Food, Villager, Monster, Basic, Special
  "subTypes": ["string"],  // Fighter, Wizard, Dragon, Undead 等標籤
  "cost": 0,               // 村莊購買費用 (金幣)
  "vp": 0,                 // 勝利點數
  "goldValue": 0,          // 作為資源使用時提供的金幣
  "light": 0,              // 提供/要求的亮度值
  "desc": "string",        // 說明文字
  "requirements": {},      // 使用需求 (如: { "minStrength": 5 })
  "abilities": {           // 特殊效果觸發 (Key-Value)
    "onVillage": "string",
    "onDungeon": "string",
    "onWin": "string"
  },
  
  // --- 類別專屬欄位 ---
  "hero": {
    "level": 1, 
    "series": "string", 
    "magicAttack": 0, 
    "strength": 0,         // 力量 (決定負重與基礎物理攻擊)
    "xpToUpgrade": 0, 
    "upgradeToId": "string"
  },
  "monster": {
    "tier": 1, 
    "hp": 0, 
    "xpGain": 0, 
    "goldGain": 0,
    "penalty": 0           // 特殊懲罰值
  },
  "equipment": {
    "attack": 0, 
    "magicAttack": 0, 
    "weight": 0            // 佔用負重
  }
}
```

---

## 3. 遊戲設置 (Setup)

### 3.1 初始牌庫 (每位玩家)
每位玩家起始擁有 12 張基礎卡牌：
- **正規軍 (Regular Army)** x 6 (英雄: STR 1)
- **火把 (Torch)** x 2 (光源: +1 Light / +2 Gold)
- **長矛 (Spear)** x 2 (武器: +1 ATK / +1 Gold)
- **乾糧 (Rations)** x 2 (食物: 戰鬥時 STR+2 / +1 Gold)

### 2.2 廣場市集 (Plaza Market)
- **基礎供應區**：
  - 始終提供：`正規軍` (Lv0)、`火把` (LightItem)、`長矛` (Weapon)、`乾糧` (Food)。
- **隨機供應區**：
  - **英雄**：隨機抽取 4 種不同的 Level 1 英雄。
  - **物品/法術**：隨機抽取 2 種攻擊型道具 (`attackItems`) 與 2 種村莊輔助道具 (`villageItems`)，共 4 張。
- **功能**：玩家花費金幣購買卡牌，買入後進入棄牌堆（部分遊戲設計是買入後進手牌，此處延續 Dominion 規則：進棄牌堆）。

---

## 4. 遊戲流程與操作 (Game Flow)

### 4.1 回合結構
每個回合依序分為以下子階段，但核心行動改為**手動結束**以提供決策彈性：

1.  **抽牌階段 (Draw)**：玩家從牌庫抽取 6 張卡片。
2.  **核心行動選擇 (Core Action)**：玩家必須從以下三者選一，且行動結束前可自由執行卡片效果：
    -   **造訪村莊 (Visit Village)**：
        -   計算手牌產出的金幣。
        -   執行卡片效果或購買市場卡片。
        -   **完成後點擊「結束村莊行動」**。
    -   **休息整補 (Rest)**：
        -   立即獲得 1 XP。
        -   **可選**：選擇手牌中 1 張卡片進行銷毀 (Destroy)。
        -   **完成後點擊「完成休息行動」**。
    -   **進入地城 (Enter Dungeon)**：
        -   進入戰鬥模式，配置英雄與裝備。
        -   可進行多次戰鬥結算（若手牌足夠）。
        -   **完成後點擊「結束戰鬥行動」**。
3.  **地城推進階段 (Dungeon Shift)**：
    -   行動結束後，地城怪物依序向 Rank 1 移動，並補充新怪物。
4.  **清理階段 (Cleanup)**：
    -   將手牌與已打出卡片置入棄牌堆。
Rank 1 (-1 Light), Rank 2 (-2 Light), Rank 3 (-3 Light)。
3. **雷霆標記隨機分配 (Thunderstone Marker)**：
   - **機制**：不再使用單一的 Boss 卡。
   - **分配**：在怪物牌庫**建構完成後**，系統會從**最底部 10 張**怪物中，隨機選定一隻作為「雷霆之石攜帶者」。
   - **強化效果**：該怪物獲得「雷霆之石」標記，基礎 **生命值 (HP) +3**。
   - **視覺標示**：在地城中出現時，該怪物將擁有獨特的特效或邊框標記。

---

## 4. 遊戲流程

### 4.1 回合結構
每個回合分為三個階段：

#### 第一階段：行動 (Action)
玩家必須從以下三種行動選擇其一：
1. **造訪村莊 (Visit Village)**：
   - 展示手牌中的資源卡。
   - 購買新卡片 (放入棄牌堆)。
   - 支付 XP 升級場上的英雄。
   - **後果**：地城中 Rank 1 的怪物會逃脫 (移出遊戲並計入玩家扣分或破壞堆)。
2. **進入地城 (Enter Dungeon)**：
   - 選擇一個 Rank 的怪物進行戰鬥。
   - **戰鬥配置 (v3.22 新制)**：
     - 玩家需從手牌中選擇最多三張卡片放入**戰鬥指揮區**：
       - **[英雄槽位]**：必須配置 1 名英雄。
       - **[傷害裝備槽位]**：可配置 1 張武器 (Weapon) 或 法術 (Spell)。
       - **[輔助物資槽位]**：可配置 1 張食物 (Food) 或 道具 (Item)。
   - **戰鬥計算公式 (v3.22.13 更新)**：
     - `英雄力量 (HeroStr) = 基礎力量 + 輔助道具加成 + 光環修正`。
     - `基礎傷害 = 英雄力量 (HeroStr) + 武器攻擊 (WeaponAtk) + 特殊協同加成 (Bonus)`。
     - `總光照 = 手牌所有光源卡總和`。
     - `光照不足懲罰 = Max(0, 區域懲罰值 - 總光照) * 2`。
     - `最終攻擊 = (基礎傷害 + 魔法攻擊) - 光照不足懲罰`。
     - `勝負結果`：若 `最終攻擊 >= 怪物HP` 則勝利；否則戰敗。
     - **戰後處理**：單次攻擊動作後，僅將 **戰鬥指揮區** 中 有選上的卡牌移至棄牌區。若怪物未被擊敗，玩家可使用剩餘手牌進行下一次戰鬥配置，直到選擇結束戰鬥階段。
3. **休息 (Rest)**：
   - **核心效果**：獲得 **1 點 XP**。
   - **可選動作**：可選擇摧毀一張手牌 (移出遊戲)。
   - **後果**：同造訪村莊，Rank 1 怪物逃脫。

#### 第二階段：地城推進 (Dungeon Shift)
如果在「造訪村莊」或「休息」時有怪物逃脫，或「進入地城」挑戰成功：
- 地城怪物依照 Rank 順序向 Rank 1 移動填補。
- 從牌庫翻開新怪物填補 Rank 3 的空缺。

#### 第三階段：重整 (Cleanup)
- 將手牌與本回合打出的卡片全部放入棄牌堆。
- 重新補滿 6 張手牌。若牌庫不足，將棄牌堆重新洗牌。

---

## 5. 核心機制詳細規則

### 5.1 負重與武器 (Strength & Weight)
- 英雄卡上有力量值 (**Strength**)，同時代表其基礎物理攻擊力。
- 武器卡上有重量值 (**Weight**)。
- **規則**：英雄的力量值必須大於等於所持武器的重量 (`STR ≧ WGT`)。若能量不足，該武器攻擊力無效。
- **輔助加成**：部分食物或道具可提供額外力量 (STR)，於配置時即刻生效，可協助英雄拿起更重的武器。

### 5.2 光源懲罰 (Light Penalty)
- 地城愈深愈黑暗。
- **計算**：每缺少 1 點光照，總戰力扣除 2 點 (v3.21.2)。
- **例外**：魔法攻擊 (Magic Attack) 通常不受光照懲罰影響。

### 5.3 經驗與升級 (XP & Level Up)
- 戰勝怪物可獲得 XP。
- 在村莊階段，可消耗特定 XP 將手牌中的英雄替換為下一等級的英雄卡。

### 5.4 雷霆之石與遊戲終結 (Thunderstone Mechanic)
- **攜帶者識別**：當帶有雷霆標記的怪物出現在 Rank 1 時，若玩家未能在其逃脫前將其擊敗，則遊戲視同失敗。
- **勝利條件**：擊敗持有標記的怪物後，玩家立即奪得雷霆之石，進入終點結算。

### 5.5 負面效果與時機 (Negative Effects & Timing)
怪物的效果依照觸發時機分為以下三類：
1.  **進場效果 (Breach/Entry)**：
    *   **觸發**：僅在怪物從牌庫翻開進入 **Rank 3** 時觸發一次。
    *   **範例**：蜈蚣（受傷棄牌）、薩滿（棄牌）。
2.  **持續光環 (Aura/Persistent)**：
    *   **觸發**：只要怪物存在於地城大廳（Rank 1-3），效果就持續生效。
    *   **範例**：蜘蛛（所有英雄力量 -1）、幽靈（物理免疫）。
3.  **戰鬥效果 (Battle)**：
    *   **觸發**：僅在玩家選擇該怪物進行戰鬥時判定。
    *   **範例**：史萊姆（攻擊力減半）、巫妖（需要 3 名以上英雄才能攻擊）。

---

## 6. 勝負判定
- **勝利條件**：擊敗持有雷霆之石的 Boss。
- **失敗條件**：
  - Boss 逃脫地城出口。
  - **村莊淪陷**：村莊魔法護罩耐久 (Shield) 歸零。
- **最終計分**：`我的總 VP - 逃脫怪物總 VP`。

---
**本企劃書由 Antigravity 整理編寫，旨在將雷霆之石的豐富內容轉化為可開發的電子版架構。**
